<!DOCTYPE html>
<html>
  <head>
    <title>Spacefield League Presentation</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../src/main.css"/>
    <link rel="stylesheet" href="presentation.css"/>
  </head>
  <body>
    <section>
      <img src="assets/js13kgames_logo_white.png"></img>
    </section>
    <section>
      <h2>contest</h2>
      <ul>
        <li>one month duration</li>
        <li>no external libraries or services</li>
        <li>zip package size below 13 kb</li>
        <li>two sources - readable and compressed</li>
      </ul>
    </section>
    <section>
      <h2>web platform</h2>
      <div>
        <p>html</p>
        <p>css</p>
        <p>javascript</p>
      </div>
      <div>
        <p>svg</p>
        <p>canvas 2d</p>
        <p>webgl</p>
      </div>
    </section>
    <section>
      <h2>categories</h2>
      <div>
        <p class="alt">desktop</p>
        <p>mobile</p>
        <p class="alt">server</p>
        <p>a-frame</p>
      </div>
    </section>
    <section>
      <h1>Spacefield League</h1>
      <p>Multiplayer online ball game</p>
    </section>
    <section>
      <img class="borders" src="assets/play.jpg"></img>
    </section>
    <section>
      <h2>Game Features</h2>
      <ul>
        <li><span class="alt">seven different vehicles</span> to play with <br>each with his own stats</li>
        <li>statistics and votes for each player on end-match</li>
        <li>training room</li>
        <li>custom rooms</li>
        <li>matches from <span class="alt">1vs1</span> to <span class="alt">5vs5</span> players</li>
        <li>spectator mode</li>
        <li>room chat</li>
        <li>full-screen</li>
      </ul>
    </section>
    <section>
      <h2>architecture</h2>
      <img src="assets/architecture.svg"></img>
    </section>
    <section>
      <h2>server</h2>
      <ul>
        <li>node.js sandbox - node vm - no modules</li>
        <li>websockets - socket.io</li>
      </ul>
      <a target="_blank" href="https://github.com/js13kGames/js13kserver/blob/master/index.js#L55">code</a>
    </section>
    <section>
      <h2>room</h2>
      <ul>
        <li>state: match, players, ball, team, stats</li>
        <li>receive client events: update player state</li>
        <li>every 100ms: update state &amp; send patches</li>
      </ul>
    </section>
    <section>
      <h2>room state</h2>
      <img src="assets/state.png"></img>
    </section>
    <section>
      <h2>patches</h2>
      <img src="assets/patches.png"></img>
    </section>
    <section>
      <h2>client</h2>
      <ul>
        <li>html, css, js</li>
        <li>each entity in the state = div element</li>
        <li>every 100ms: receive patches &amp; update state</li>
        <li>then update data attributes &amp; css variables</li>
        <li>then execute animations, play sounds</li>
      </ul>
    </section>
    <section>
      <h2>client updates</h2>
      <ol>
        <li>user press a key</li>
        <li>websocket sends an event</li>
        <li>server update player status</li>
        <li>server update game status</li>
        <li>server sends a patch to clients</li>
        <li>clients move the dom element</li>
      </ol>
    </section>
    <section>
      <h2>client problem</h2>
      <p>missing client predictions</p>
    </section>
    <section>
      <h2>css variables</h2>
      <img src="assets/cssvar.png"></img>
    </section>
    <section>
      <img src="assets/cssvar2.png"></img>
    </section>
    <section>
      <h2>clip-path</h2>
      <div class="v">
        <div class="p" data-v="0"></div>
        <div class="p" data-v="1"></div>
        <div class="p" data-v="2"></div>
        <div class="p" data-v="3"></div>
        <div class="p" data-v="4"></div>
        <div class="p" data-v="5"></div>
        <div class="p" data-v="6"></div>
      </div>
      <img src="assets/clippath.png"></img>
      <a target="_blank" href="https://jsfiddle.net/salvan13/fqfvfpb2/">demo</a>
    </section>
    <section>
      <h2>css filters</h2>
      <img src="assets/filters.png"></img>
      <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter">demo</a>
    </section>
    <section>
      <h2>animation api</h2>
      <img src="assets/animationapi.png"></img>
      <a target="_blank" href="https://jsfiddle.net/salvan13/ug8jdm4f/">demo</a>
    </section>
    <section>
      <h2>speech</h2>
      <img src="assets/speech.png"></img>
      <a target="_blank" href="https://jsfiddle.net/salvan13/znvLrbLo/">demo</a>
    </section>
    <section>
      <h2>sounds</h2>
      <p>jsfxr library</p>
      <img src="assets/jsfxr.png"></img>
      <a target="_blank" href="http://ashkyd.github.io/jsfxr-editor/">demo</a>
    </section>
    <section>
      <h2>music</h2>
      <p>Web Audio API</p>
      <img src="assets/music.png"></img>
      <a target="_blank" href="https://jsfiddle.net/salvan13/2qph12jo/">demo</a>
    </section>
    <section>
      <h2>viewport relative units</h2>
      <ul>
        <li><span class="alt">vw</span> viewport width</li>
        <li><span class="alt">vh</span> viewport height</li>
        <li><span class="alt">vmin</span> viewport minimum</li>
        <li><span class="alt">vmax</span> viewport maximum</li>
      </ul>
    </section>
    <section>
      <h2>build</h2>
      <ul>
        <li>gulp</li>
        <li>babel-minify - minify js</li>
        <li>gulp-csso - minify css</li>
        <li>gulp-htmlmin - minify html</li>
        <li>gulp-zip - create the zip</li>
      </ul>
    </section>
    <section>
      <h2>deploy</h2>
      <p>heroku - auto deploy github repo</p>
    </section>
    <section>
      <h2>compression</h2>
      <ul>
        <li>use small properties names and css class names</li>
        <li>inline functions used one time</li>
        <li>remove not very useful functionality</li>
        <li>reduce texts length</li>
      </ul>
    </section>
    <section>
      <div>
        <div>
          <h2>final package contents</h2>
          <span>uncompressed</span>
        </div>
        <img src="assets/files.png" style="width: 30%"></img>
      </div>
    </section>
    <section>
      <h2>what went bad</h2>
      <ul>
        <li>show game potential asap</li>
        <li>multiplayer should be enjoyable even for two players</li>
      </ul>
    </section>
    <section>
      <h2>what went good</h2>
      <ul>
        <li>joined nice and helpful community</li>
        <li>game completed!</li>
      </ul>
    </section>
    <section>
      <h2>result</h2>
      <ul>
        <li>2nd server category</li>
        <li>60/70 desktop category</li>
      </ul>
    </section>
    <section>
      <h2>thanks</h2>
    </section>
    <section>
      <a href="http://js13kgames.com/">js13k competition</a>
      <a href="http://js13kgames.com/entries/spacefield-league">game page</a>
    </section>
    
    <script>
      // jump to next section on click
      document.body.addEventListener('click', (e) => {
        if(e.target.tagName == 'A') {
          return;
        }
        let section;
        if(e.target.tagName == 'SECTION') {
          section = e.target;
        } else {
          section = e.target.closest('section');
        }
        if(section && section.nextElementSibling) {
          document.body.scrollTo(0, section.nextElementSibling.offsetTop);
        }
      });
    </script>
  </body>
</html>
